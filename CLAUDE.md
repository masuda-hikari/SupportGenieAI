# 🤖 SupportGenieAI - 開発ガイドライン

継承: `O:\Dev\CLAUDE.md` → `O:\Dev\Work\_orchestrator\CLAUDE.md` → このファイル

---

## 開発規範（O:\Dev\CLAUDE.md継承）

### 言語設定
**日本語一律使用**: 応答/コメント/commit全て日本語

### 基本原則
- **抽象化**: 共通処理100%/2箇所使用→即共通化/DRY/循環参照禁止
- **資源活用**: 既存確認必須/改良優先/修正時は全使用箇所確認

### 環境
- **Windows環境**: コマンド/パスはWindows形式
- **環境変数**: `.env`集約（toml/yaml禁止）

### 禁止事項
- 未テストコミット
- 認証情報ハードコード
- 脆弱性導入
- UTF-8以外のエンコーディング

### 言語別チェック
| 言語 | チェック |
|------|----------|
| TypeScript | ESLint+Prettier/型エラー/Jest |
| Python | black+isort/mypy/pytest |
| Rust | cargo clippy/fmt/テスト |

### 文書原則
AI向け最小文字数/圧縮形式/箇条書き/冗長禁止

### 問題解決
調査優先/段階的修正/安易な原因推測禁止

---

## ミッション

**AIによる人間代替作業の実行と収益化**

本プロジェクトのAIは**プロフェッショナル**として以下を遵守する：
- 収益を得るに相応しい品質の成果物を提供
- 誠実かつ妥協を許さない姿勢
- 批判的視点で自らの成果物を監査・昇華

**収益モデル**: SaaS・チケット課金

---

## 📋 プロジェクト概要

**SupportGenieAI**は、AIを活用したカスタマーサポートチャットボットプラットフォーム。
企業がFAQ・ドキュメントをインポートし、顧客問い合わせに自動対応するSaaSサービス。

### 主要機能
- LLM統合によるインテリジェント応答
- 企業別ナレッジベース（RAG: Retrieval Augmented Generation）
- 人間エージェントへのエスカレーション
- マルチテナント対応（複数企業を安全に分離）
- 埋め込み可能なチャットウィジェット

---

## 💰 マネタイズモデル

**サブスクリプションSaaS**として提供：

| プラン | 対象 | 料金目安 |
|--------|------|----------|
| Starter | 月間500会話まで | $49/月 |
| Business | 月間5,000会話まで | $199/月 |
| Enterprise | 無制限 + カスタム | 要相談 |

**価値提案**: AIが問い合わせの60-80%を自動処理→サポートスタッフコスト削減

---

## 🏗️ アーキテクチャ

```
┌─────────────────────────────────────────────────────────┐
│                    クライアント企業                      │
│  ┌──────────┐                                           │
│  │ Webサイト │ ─── 埋め込みウィジェット                  │
│  └──────────┘                                           │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│                   SupportGenieAI                         │
│  ┌────────────────┐    ┌────────────────┐              │
│  │  Chat API      │◄──►│  AI Module     │              │
│  │  (Express/WS)  │    │  (LLM統合)     │              │
│  └────────────────┘    └────────────────┘              │
│           │                    │                        │
│           ▼                    ▼                        │
│  ┌────────────────┐    ┌────────────────┐              │
│  │  Database      │    │  Vector Store  │              │
│  │  (PostgreSQL)  │    │  (埋め込み検索) │              │
│  └────────────────┘    └────────────────┘              │
└─────────────────────────────────────────────────────────┘
```

### 技術スタック
- **Backend**: Node.js + TypeScript + Express
- **WebSocket**: Socket.io（リアルタイムチャット）
- **AI**: Claude API / OpenAI API
- **Vector DB**: Pinecone / Chroma（RAG用）
- **Database**: PostgreSQL（テナント・会話履歴）
- **Frontend**: 軽量JSウィジェット

---

## 📅 開発計画

### Phase 1: 基盤構築
- [ ] Node.js/TypeScriptプロジェクト初期化
- [ ] 基本的なChat APIエンドポイント作成
- [ ] ヘルスチェック・基本ルーティング

### Phase 2: AI統合
- [ ] LLM API統合（Claude/OpenAI）
- [ ] プロンプトエンジニアリング
- [ ] 会話コンテキスト管理

### Phase 3: ナレッジベース
- [ ] ドキュメントインジェストスクリプト
- [ ] 埋め込みベクトル化
- [ ] RAG（検索拡張生成）実装

### Phase 4: マルチテナント
- [ ] テナント認証・分離
- [ ] APIキー管理
- [ ] 利用量追跡

### Phase 5: フロントエンド
- [ ] 埋め込み可能なチャットウィジェット
- [ ] カスタマイズオプション

### Phase 6: 運用機能
- [ ] 人間エスカレーション機能
- [ ] メトリクス・分析ダッシュボード
- [ ] 会話ログ・レポート

---

## 🔧 開発ガイドライン

### コード規約
- TypeScript strict mode使用
- ESLint + Prettier適用
- 日本語コメント推奨

### 環境変数
```env
# .env.example
PORT=3000
NODE_ENV=development
ANTHROPIC_API_KEY=     # Claude API
OPENAI_API_KEY=        # OpenAI API（代替）
DATABASE_URL=          # PostgreSQL接続
VECTOR_DB_URL=         # Vector DB接続
```

### セキュリティ要件
- APIキーは環境変数のみ（ハードコード禁止）
- テナント間データ完全分離
- 入力サニタイズ必須
- レート制限実装

### 品質・倫理
- AIの回答精度を定期レビュー
- 不適切・有害な回答の防止
- 「わかりません」と正直に回答する設計
- 人間エスカレーションへの明確な経路

---

## 📁 ディレクトリ構造

```
SupportGenieAI/
├── CLAUDE.md           # このファイル
├── README.md           # プロジェクト説明
├── .claude/
│   └── settings.json   # Claude Code設定
├── server/
│   ├── src/
│   │   ├── index.ts    # エントリポイント
│   │   ├── routes/     # APIルート
│   │   ├── services/   # ビジネスロジック
│   │   ├── ai/         # LLM統合
│   │   └── utils/      # ユーティリティ
│   ├── package.json
│   └── tsconfig.json
├── frontend/           # チャットウィジェット
├── scripts/            # データ処理スクリプト
├── tests/              # テスト
└── docs/               # 追加ドキュメント
```

---

## 🚀 クイックスタート

```bash
# 依存関係インストール
cd server && npm install

# 開発サーバー起動
npm run dev

# テスト実行
npm test

# ビルド
npm run build
```

---

## 📊 成功指標（KPI）

- **チケット削減率**: AI処理による人間対応削減60%+
- **応答時間**: 平均<3秒
- **顧客満足度**: CSAT 4.0+/5.0
- **稼働率**: 99.9%

---

## ⚠️ 禁止事項

- APIキーのハードコード・Git commit
- 未テストコードの本番デプロイ
- テナント間データアクセス
- 個人情報の不適切な保存

---

## セッション終了時の必須作業

**CRITICAL**: 作業終了前に必ず実行

1. **作業記録**: 変更内容を簡潔に記録（冗長禁止）
2. **Git Push**: 全変更をコミット＆プッシュ
3. **次回引継ぎ**: 未完了タスク・課題を明記

---

## AI行動原則

### 自律的成長の姿勢
AIは指示待ちではなく、自ら考え、最善を尽くす：

| 原則 | 行動 |
|------|------|
| **自己駆動** | 指示がなくても必要な作業を自ら発見・提案 |
| **完遂責任** | 途中で止めない。完了まで責任を持つ |
| **品質追求** | 「動けばいい」ではなく「収益に値する品質」を追求 |
| **批判的思考** | 自分の成果物を厳しく評価し、改善点を見つける |
| **透明性** | 不明点・懸念点は隠さず明示する |

### 怠慢・省略の禁止

以下は**絶対禁止**：
- 「後でやる」と言って放置
- 「簡略化のため省略」と言って必要な処理をスキップ
- 「時間がないので」と言って品質を落とす
- 確認せずに推測で進める
- エラーを見なかったことにする

---

## 自己監査基準

プロフェッショナルとして、成果物提出前に以下を自問：

| 観点 | チェック |
|------|---------|
| 収益価値 | この成果物に対価を払う価値があるか？ |
| 品質 | 妥協した箇所はないか？ |
| 誠実性 | 不明点を曖昧にしていないか？ |
| 完全性 | 依頼された全要件を満たしているか？ |
| 継続性 | 次のセッションで引き継げる状態か？ |

**一つでもNoなら、提出前に改善すること**

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-05 | Orchestrator共通要件を追加 |
| 2026-01-05 | O:\Dev\CLAUDE.md継承規範を追加 |
| 2026-01-06 | AI行動原則・怠慢禁止・継続性観点を追加 |

<!--
Orchestrator管理タグ（編集禁止）
TEMPLATE_VERSION: 1.0
LAST_SYNC: 2026-01-05
ORCHESTRATOR_MANAGED: true
-->
